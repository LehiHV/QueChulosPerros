@page "/mascotas"
@using QueChulosPerros.Shared.Model
@inject HttpClient http
@inject NavigationManager navegar

<div class="container">
    <center>
        <div class="card">
            <h3 class="login">Nueva Mascota</h3>
            <EditForm Model="pet" OnValidSubmit="Guardar">
                <DataAnnotationsValidator />
                <div class="inputBox">
                    <input @bind="pet.Name" type="text" required>
                    <span class="user">Nombre de la Mascota</span>
                    <ValidationMessage For="@(() => pet.Name)" />
                </div>
                <div class="inputBox">
                    <input @bind="pet.Phone" type="text" required>
                    <span class="user">Telefono</span>
                    <ValidationMessage For="@(() => pet.Phone)" />
                </div>
                <div class="inputBox">
                    <div class="btn-group" role="group" aria-label="Basic checkbox toggle button group">
                        <input type="checkbox" class="btn-check" id="btncheck1" autocomplete="off" @bind="pet.Alive">
                        <label class="btn btn-outline-dark border border-dark btn-lg sans" for="btncheck1">Vivo</label>
                    </div>
                    <ValidationMessage For="@(() => pet.Alive)" />
                </div>
                <div class="inputBox">
                    <select @bind="pet.Gender" required class="styledSelect">
                        <option value="Hembra">Hembra</option>
                        <option value="Macho">Macho</option>
                        <option value="NoEspecificado">No Especificado</option>
                    </select>
                    <span>Genero</span>
                    <ValidationMessage For="@(() => pet.Gender)" />
                </div>
                <div class="inputBox">
                    <input @bind="pet.Email" type="email" required>
                    <span class="user">Email</span>
                    <ValidationMessage For="@(() => pet.Email)" />
                </div>
                <div class="inputBox">
                    <select @bind="pet.Specie" required class="styledSelect">
                        <option value="Perro">Perro</option>
                        <option value="Gato">Gato</option>
                        <option value="Ave">Ave</option>
                        <option value="Roedor">Roedor</option>
                    </select>
                    <span>Especie</span>
                    <ValidationMessage For="@(() => pet.Specie)" />
                </div>
                <div class="inputBox">
                    <input @bind="pet.Breed" type="text" required>
                    <span class="user">Raza</span>
                    <ValidationMessage For="@(() => pet.Breed)" />
                </div>
                <div class="inputBox">
                    <input @bind="pet.Description" type="text" required>
                    <span class="user">Descripcion</span>
                    <ValidationMessage For="@(() => pet.Description)" />
                </div>
                <button type="submit" class="success">Guardar</button>
                <button type="submit" class="cancel" @onclick="Cancelar">Cancelar</button>
            </EditForm>
        </div>
    </center>
</div>
@code {
    private Mascota pet = new Mascota();

    private async void Guardar()
    {
        pet.ClientId = 1;
        await http.PostAsJsonAsync("api/Mascotas", pet);
        navegar.NavigateTo("/clientes");
    }

    private void Cancelar()
    {
        navegar.NavigateTo("/clientes");
    }
}
